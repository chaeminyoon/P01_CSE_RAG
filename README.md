# ğŸ” Embed Data Quality Scanner

**RAG ì‹œìŠ¤í…œì˜ ë°ì´í„° í’ˆì§ˆì„ ì§„ë‹¨í•˜ê³  ê²€ìƒ‰ ì •í™•ë„ë¥¼ ê°œì„ í•˜ëŠ” ë„êµ¬**

[![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)](https://python.org)
[![Streamlit](https://img.shields.io/badge/Streamlit-1.31+-red.svg)](https://streamlit.io)
[![Cohere](https://img.shields.io/badge/Cohere-Embed%20v3-green.svg)](https://cohere.com)

---

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

RAG(Retrieval-Augmented Generation) ì‹œìŠ¤í…œì—ì„œ **ë°ì´í„° í’ˆì§ˆ ë¬¸ì œ**ëŠ” ê²€ìƒ‰ ì •í™•ë„ ì €í•˜ì˜ ì£¼ìš” ì›ì¸ì…ë‹ˆë‹¤.  
ì´ ë„êµ¬ëŠ” ë¬¸ì„œ ë°ì´í„°ì˜ **ì¤‘ë³µ, ë…¸ì´ì¦ˆ, í’ˆì§ˆ ë¬¸ì œ**ë¥¼ ìë™ìœ¼ë¡œ íƒì§€í•˜ê³  ì •ì œí•˜ì—¬ ê²€ìƒ‰ ì„±ëŠ¥ì„ ê°œì„ í•©ë‹ˆë‹¤.

### ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| **í’ˆì§ˆ ìŠ¤ìº”** | ì„ë² ë”© ê¸°ë°˜ ì¤‘ë³µ íƒì§€ + í…ìŠ¤íŠ¸ í’ˆì§ˆ ë¶„ì„ |
| **ìë™ í´ë¦¬ë‹** | ë¬¸ì œ ë¬¸ì„œ ìë™ ì œê±° (ì „ëµ ì„ íƒ ê°€ëŠ¥) |
| **ë²¤ì¹˜ë§ˆí¬** | Before/After ê²€ìƒ‰ ì„±ëŠ¥ ë¹„êµ |
| **ë¦¬í¬íŠ¸** | ë¶„ì„ ê²°ê³¼ Markdown ë¦¬í¬íŠ¸ ìƒì„± |

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
pip install -r requirements.txt
```

### 2. API í‚¤ ì„¤ì •

```bash
cp .env.example .env
```

`.env` íŒŒì¼ì— API í‚¤ ì…ë ¥:
```env
COHERE_API_KEY=your-cohere-api-key
PINECONE_API_KEY=your-pinecone-api-key
```

### 3. ì•± ì‹¤í–‰

```bash
python -m streamlit run src/main.py
```

ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8501 ì ‘ì†

---

## ğŸ“Š ì‚¬ìš© ë°©ë²•

### Step 1: ë°ì´í„° ì—…ë¡œë“œ

- **ë¬¸ì„œ íŒŒì¼**: PDF ë˜ëŠ” CSV ì—…ë¡œë“œ
- **Ground Truth**: ë²¤ì¹˜ë§ˆí¬ìš© ì¿¼ë¦¬ CSV (ì„ íƒ)

```csv
# documents.csv í˜•ì‹
id,text,category
doc_001,"RAGëŠ” ëŒ€ê·œëª¨ ì–¸ì–´ ëª¨ë¸ì˜ ì‘ë‹µì„...",AI
```

```csv
# ground_truth.csv í˜•ì‹
query_id,query,relevant_doc_ids
q001,"RAGê°€ ë¬´ì—‡ì¸ê°€ìš”?","doc_001,doc_006"
```

### Step 2: í’ˆì§ˆ ìŠ¤ìº”

"Run Quality Scan" í´ë¦­ ì‹œ:
1. Cohere Embed v3ë¡œ ë¬¸ì„œ ì„ë² ë”© ìƒì„±
2. ì½”ì‚¬ì¸ ìœ ì‚¬ë„ë¡œ ì¤‘ë³µ íƒì§€
3. í…ìŠ¤íŠ¸ í’ˆì§ˆ ë¶„ì„ (ê¸¸ì´, íŠ¹ìˆ˜ë¬¸ì ë“±)
4. ìë™ í´ë¦¬ë‹ ìˆ˜í–‰

### Step 3: RAG ë²¤ì¹˜ë§ˆí¬

"Run Benchmark" í´ë¦­ ì‹œ:
- ì›ë³¸ vs ì •ì œ ë°ì´í„° ì„±ëŠ¥ ë¹„êµ
- NDCG@10, Hit Rate@10 ì¸¡ì •
- Cohere Rerank ì ìš© íš¨ê³¼ í™•ì¸

### Step 4: ë¦¬í¬íŠ¸ ìƒì„±

ë¶„ì„ ê²°ê³¼ë¥¼ Markdownìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
P01_CSE_RAG/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.py              # Streamlit ì•±
â”‚   â”œâ”€â”€ embeddings/
â”‚   â”‚   â””â”€â”€ cohere_client.py # Cohere API í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ vectordb/
â”‚   â”‚   â””â”€â”€ pinecone_client.py # Pinecone í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ scanner/
â”‚   â”‚   â”œâ”€â”€ scanner.py       # ìŠ¤ìº” ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
â”‚   â”‚   â”œâ”€â”€ noise_detector.py # ì¤‘ë³µ íƒì§€
â”‚   â”‚   â”œâ”€â”€ text_analyzer.py  # í…ìŠ¤íŠ¸ ë¶„ì„
â”‚   â”‚   â””â”€â”€ cleaner.py       # ë°ì´í„° í´ë¦¬ë‹
â”‚   â”œâ”€â”€ evaluator/
â”‚   â”‚   â”œâ”€â”€ evaluator.py     # RAG í‰ê°€
â”‚   â”‚   â”œâ”€â”€ metrics.py       # NDCG, MRR ë“±
â”‚   â”‚   â””â”€â”€ reranker.py      # Cohere Rerank
â”‚   â”œâ”€â”€ ingest/
â”‚   â”‚   â”œâ”€â”€ csv_loader.py    # CSV ë¡œë”
â”‚   â”‚   â”œâ”€â”€ pdf_parser.py    # PDF íŒŒì„œ
â”‚   â”‚   â””â”€â”€ chunker.py       # í…ìŠ¤íŠ¸ ì²­í‚¹
â”‚   â””â”€â”€ report/
â”‚       â””â”€â”€ generator.py     # ë¦¬í¬íŠ¸ ìƒì„±
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ settings.py          # í™˜ê²½ ì„¤ì •
â”‚   â””â”€â”€ logging_config.py    # ë¡œê¹… ì„¤ì •
â”œâ”€â”€ data/
â”‚   â””â”€â”€ sample/              # ìƒ˜í”Œ ë°ì´í„°
â”œâ”€â”€ .env.example             # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ
â””â”€â”€ requirements.txt         # ì˜ì¡´ì„±
```

---

## ğŸ”§ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STREAMLIT UI                          â”‚
â”‚  Upload â†’ Scan â†’ Benchmark â†’ Report                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ SCANNER â”‚    â”‚ INGEST  â”‚    â”‚  EVALUATOR  â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ â€¢ ì¤‘ë³µíƒì§€â”‚    â”‚ â€¢ CSV   â”‚    â”‚ â€¢ NDCG      â”‚
    â”‚ â€¢ í’ˆì§ˆë¶„ì„â”‚    â”‚ â€¢ PDF   â”‚    â”‚ â€¢ Rerank    â”‚
    â”‚ â€¢ í´ë¦¬ë‹ â”‚    â”‚ â€¢ Chunk â”‚    â”‚ â€¢ ë¹„êµí‰ê°€   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚               â”‚               â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   COHERE    â”‚              â”‚  PINECONE   â”‚
    â”‚ â€¢ Embed v3  â”‚              â”‚ â€¢ Vector DB â”‚
    â”‚ â€¢ Rerank 3.5â”‚              â”‚ â€¢ Namespace â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ ì„±ëŠ¥ ê°œì„  ì˜ˆì‹œ

| Metric | Before | After | Improvement |
|--------|--------|-------|-------------|
| NDCG@10 | 31.22% | 88.42% | **+183.2%** |
| Hit Rate@10 | 80% | 100% | **+25%** |
| Documents | 20 | 15 | -5 (ì •ì œ) |

---

## âš™ï¸ ì„¤ì • ì˜µì…˜

### ì‚¬ì´ë“œë°” ì„¤ì •

| ì˜µì…˜ | ê¸°ë³¸ê°’ | ì„¤ëª… |
|------|--------|------|
| Duplicate Threshold | 0.92 | ì¤‘ë³µ íŒì • ìœ ì‚¬ë„ ì„ê³„ê°’ |
| Cleaning Strategy | MODERATE | í´ë¦¬ë‹ ê°•ë„ |

### í´ë¦¬ë‹ ì „ëµ

| ì „ëµ | ì œê±° ëŒ€ìƒ |
|------|----------|
| CONSERVATIVE | ì™„ì „ ì¤‘ë³µë§Œ |
| MODERATE | ì¤‘ë³µ + ì§§ì€ ë¬¸ì„œ + íŠ¹ìˆ˜ë¬¸ì ê³¼ë‹¤ |
| AGGRESSIVE | ìœ„ ëª¨ë‘ + ì €í’ˆì§ˆ ë¬¸ì„œ |

---

## ğŸ”‘ í•„ìš”í•œ API

| ì„œë¹„ìŠ¤ | ìš©ë„ | ë¬´ë£Œ í‹°ì–´ |
|--------|------|----------|
| [Cohere](https://dashboard.cohere.com) | ì„ë² ë”© & Rerank | âœ… Trial |
| [Pinecone](https://app.pinecone.io) | ë²¡í„° DB | âœ… Starter |

---

## ğŸ“š í™œìš© ì‹œë‚˜ë¦¬ì˜¤

### 1. CSE í‹°ì¼“ í•´ê²°
ê³ ê°ì‚¬ RAG ì±—ë´‡ì˜ ê²€ìƒ‰ ì •í™•ë„ ì €í•˜ ì›ì¸ì„ ì§„ë‹¨í•˜ê³  í•´ê²° ë°©ì•ˆ ì œì‹œ

### 2. ë°ì´í„° íŒŒì´í”„ë¼ì¸ ê²€ì¦
ì‹ ê·œ ë°ì´í„° ìˆ˜ì§‘ ì‹œ í’ˆì§ˆ ë¬¸ì œë¥¼ ì‚¬ì „ì— íƒì§€í•˜ì—¬ í”„ë¡œë•ì…˜ ë°ì´í„° í’ˆì§ˆ ë³´ì¥

### 3. RAG ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí‚¹
ë‹¤ì–‘í•œ ì „ì²˜ë¦¬ ì „ëµì˜ íš¨ê³¼ë¥¼ ì •ëŸ‰ì ìœ¼ë¡œ ë¹„êµ í‰ê°€

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **Frontend**: Streamlit, Plotly
- **Embedding**: Cohere Embed v3
- **Reranking**: Cohere Rerank 3.5
- **Vector DB**: Pinecone Serverless
- **PDF**: PyMuPDF (fitz)

---

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License

---

## ğŸ¤ ê¸°ì—¬

ì´ìŠˆì™€ PRì„ í™˜ì˜í•©ë‹ˆë‹¤!
